<application>
  <!-- Add or Modify a Survey Form -->
  <form name="survey" 
        action="CampaignManagerSurvey.do?command=Insert&amp;auto-populate=true" 
        scripts="survey.js^popURL.js"> 
    <button text="Save" link="CampaignManagerSurvey.do?command=Insert&amp;auto-populate=true"/>
    <tab id="0" name="Page 1" defaultField="name"
         returnLinkText="&lt;a href=&quot;CampaignManager.do&quot;&gt;Communications Manager&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerAttachment.do&quot;&gt;Create Attachments&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerSurvey.do?command=View&quot;&gt;Surveys&lt;/a&gt; &gt; Survey Details&lt;hr color=&quot;#BFBFBB&quot; noshade&gt;">
      <buttonGroup> <!-- TODO: add header & footer attribs !-->
        <button type="2" name="prev" display="&lt; Back" enabled="no"/>
        <button type="2" name="Next" display="Next &gt;" onclick="javascript:this.form.clickFrom.value='next';this.form.action='CampaignManagerSurvey.do?command=InsertAndAdd&amp;auto-populate=true&amp;pg=1';"/>
        <button type="2" name="save" display="Save" onclick="javascript:this.form.clickFrom.value='save';this.form.action='CampaignManagerSurvey.do?command=Insert&amp;auto-populate=true'"/>
        <button type="2" name="cancel" display="Cancel" onclick="javascript:this.form.clickFrom.value='back';this.form.action='CampaignManagerSurvey.do?command=ViewReturn&amp;auto-populate=true'"/>
      </buttonGroup>
      <group name="Step 1: Survey Details">
      <row class="containerBody">
        <column valign="top"  class="formLabel" width="80" nowrap="true">
          <field display="Name" type="label" isStatic="yes"/>
        </column>
        <column valign="top"  class="formLabel" align="left">
          <field name="name" display="Name" type="text" parameters="size=50^maxlength=80" required="true"/>
        </column>
      </row>
      <row class="containerBody">
       <column valign="top"  class="formLabel" width="80" nowrap="true">
          <field display="Description" type="label" width="80" isStatic="yes"/>
       </column>
        <column valign="top" class="formLabel" align="left">
          <field name="description" display="Description" type="text" parameters="size=50^maxlength=80"/>
      </column>
      </row>
      <row class="containerBody">
        <column valign="top" class="formLabel" width="80" nowrap="true">
          <field display="Introduction text" type="label" width="80" isStatic="yes"/>
        </column>
        <column width="80" valign="top" class="formLabel" align="left">
          <field name="intro" display="Introduction text" type="textarea" parameters="rows=6^columns=40"/>
        </column>
      </row>
      <row class="containerBody">
       <column valign="top"  class="formLabel" width="80" nowrap="true">
          <field display="Thank You Text" type="label" width="80" isStatic="yes"/>
       </column>
        <column valign="top" class="formLabel" align="left">
          <field name="outro" type="textarea" parameters="rows=6^columns=40"/>
      </column>
      </row>
      <row type="hidden">
        <column type="hidden">
          <field name="id" type="hidden"/>
          <field name="modified" type="hidden"/>
        </column>
      </row>
      </group>
    </tab>
    
    <tab id="1" name="Page 2"
         returnLinkText="&lt;a href=&quot;CampaignManager.do&quot;&gt;Communications Manager&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerAttachment.do&quot;&gt;Create Attachments&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerSurvey.do?command=View&quot;&gt;Surveys&lt;/a&gt; &gt; &lt;a href=&quot;javascript:setActionSubmit('CampaignManagerSurvey.do?command=Add&amp;auto-populate=true');&quot;&gt;Survey Details&lt;/a&gt; &gt; Survey Questions  &lt;hr color=&quot;#BFBFBB&quot; noshade&gt;">
      <buttonGroup>
        <button type="2" name="prev" display="&lt; Back"      onclick="javascript:this.form.clickFrom.value='back';this.form.action='CampaignManagerSurvey.do?command=Add&amp;auto-populate=true'"/>
        <button type="2" display="Next &gt;" enabled="no"/>
        <button type="2" display="Done" onclick="this.form.action='CampaignManagerSurvey.do?command=Details&amp;auto-populate=true'"/>
      </buttonGroup>
      <group name="">
        <row class="containerBody">
          <column valign="top"  align="left" nowrap="true">
            <field display="Add a Question" type="link" jsEvent="javascript:setActionSubmit('CampaignManagerSurvey.do?command=Add&amp;auto-populate=true&amp;pg=2');"/>
          </column>
       </row>
      </group>
      <group name="Step 2: Survey Questions">
        <row elementClass="title">
           <column valign="top"  align="center" width="50" nowrap="true">
              <field display="Action" type="label" isStatic="yes"/>
           </column>
           <column valign="top"  align="left" width="100%">
              <field display="Description" type="label" isStatic="yes"/>
           </column>
           <column valign="top"  align="left" nowrap="true">
              <field display="Type" type="label" isStatic="yes"/>
           </column>
        </row>
        <row multiple="true" listName="questions" listId="id">
          <column align="center" valign="top" nowrap="true">
            <field display="Edit" type="link" jsEvent="javascript:editQuestion($id);"/>
            <field display="|" type="label" isStatic="yes"/>
            <field display="Del" type="link" jsEvent="javascript:delQuestion($id);"/>
            <field display="|" type="label" isStatic="yes"/>
            <field display="Up" type="link" jsEvent="javascript:moveQuestion($id,'U');"/>
            <field display="|" type="label" isStatic="yes"/>
            <field display="Down" type="link" jsEvent="javascript:moveQuestion($id,'D');"/>
          </column>
          <column>
            <field name="description" type="displaytext"/>
          </column>
          <column nowrap="true">
            <field name="typeString" type="displaytext"/>
          </column>
      </row>
      <row type="hidden">
        <column type="hidden">
          <field name="id" type="hidden"/>
          <field name="intro" type="hidden"/>
          <field name="name" type="hidden"/>
          <field name="description"  type="hidden"/>
          <field name="questionid"  type="hidden"/>
          <field name="modified" type="hidden"/>
          <field name="outro" type="hidden"/>
        </column>
      </row>
      </group>
    </tab>
    
    <tab id="2" name="Page 2" defaultField="questionText" onLoad="javascript:processButton('survey',document.forms['survey'].type.value);"
         returnLinkText="&lt;a href=&quot;CampaignManager.do&quot;&gt;Communications Manager&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerAttachment.do&quot;&gt;Create Attachments&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerSurvey.do?command=View&quot;&gt;Surveys&lt;/a&gt; &gt; &lt;a href=&quot;javascript:setActionSubmit('CampaignManagerSurvey.do?command=Add&amp;auto-populate=true');&quot;&gt;Survey Details&lt;/a&gt; &gt; &lt;a href=&quot;javascript:setActionSubmit('CampaignManagerSurvey.do?command=Modify&amp;auto-populate=true&amp;pg=1');&quot;&gt;Survey Questions&lt;/a&gt; &gt; Survey Question  &lt;hr color=&quot;#BFBFBB&quot; noshade&gt;">
      <buttonGroup>
        <button type="2" name="saveadd" display="Save &amp; Add" onclick="this.form.clickFrom.value='save';this.form.action='CampaignManagerSurvey.do?command=InsertAndAdd&amp;auto-populate=true&amp;pg=2'"/>
        <button type="2" name="save" display="Save" onclick="this.form.clickFrom.value='save';this.form.action='CampaignManagerSurvey.do?command=InsertAndAdd&amp;auto-populate=true&amp;pg=1'"/>
        <button type="2" name="cancel" display="Cancel" onclick="javascript:this.form.clickFrom.value='back';this.form.action='CampaignManagerSurvey.do?command=Modify&amp;auto-populate=true&amp;pg=1';"/>
      </buttonGroup>
      <group name="Survey Question">
        <row class="containerBody">
          <column valign="top" class="formLabel" width="80" nowrap="true">
            <field display="Question" type="label" isStatic="true"/>
          </column>
          <column valign="top" class="formLabel" align="left">
            <field name="questionText" parameters="size=50^maxlength=250" display="Question" type="text" required="true" listName="questions" listItemName="surveyQuestion"/>
        </column>
      </row>
      <row class="containerBody">
          <column valign="top" class="formLabel" width="80" nowrap="true">
            <field display="Question Type" type="label" isStatic="yes"/>
          </column>
          <column valign="top" class="formLabel" align="left">
            <field name="type" display="Type" type="select" lookupList="lookup_survey_types" required="true" onChange="javascript:processButton('survey',document.forms['survey'].type.value);" listName="questions" listItemName="surveyQuestion"/>
            <field display=" " type="label" isStatic="yes"/>
            <field name="itemsButton" display="Edit Items" type="button" jsEvent="javascript:popItems(document.forms['survey'].questionId.value,document.forms['survey'].items.value);" enabled="no" isStatic="yes"/>
       </column>
      </row>
      <row class="containerBody">
          <column valign="top" class="formLabel" width="80" nowrap="true">
            <field display="Required" type="label" />
          </column>
          <column width="80" valign="top" class="formLabel" align="left">
            <field name="required" display="Required" type="checkbox"  listName="questions" listItemName="surveyQuestion"/>
        </column>
      </row>
      <row type="hidden">
        <column type="hidden">
          <field name="questionId" type="hidden" listName="questions" listItemName="surveyQuestion"/> <!-- Used to get the attributes of SurveyQuestion from Survey object !-->
          <field name="items" type="hidden" listName="questions" listItemName="surveyQuestion"/>
          <field name="position" type="hidden" listName="questions" listItemName="surveyQuestion"/>
          <field name="id" type="hidden"/>
          <field name="name" type="hidden"/>
          <field name="description" type="hidden"/>
          <field name="intro" type="hidden"/>
          <field name="outro" type="hidden"/>
          <field name="modified" type="hidden"/>
        </column>
      </row>
      </group>
    </tab>
  </form>
  
  <!-- View Survey Details -->
  <form name="surveydetails" 
        action="CampaignManagerSurvey.do?command=Insert&amp;auto-populate=true" 
        returnLinkText="Communications Manager &gt; &lt;a href=&quot;CampaignManagerAttachment.do&quot;&gt;Create Attachments&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerSurvey.do?command=View&quot;&gt;Surveys&lt;/a&gt; &gt; Survey Details&lt;hr color=&quot;#BFBFBB&quot; noshade&gt;">
    <button text="Modify" link="CampaignManagerSurvey.do?command=Modify&amp;auto-populate=true"/>
    <button text="Delete Survey" link="CampaignManagerSurvey.do?command=Delete&amp;auto-populate=true"/>
    <button text="Preview" link="CampaignManagerSurvey.do?command=Preview&amp;auto-populate=true"/>
    <tab name="Page 1" id="0">
      <group name="Survey Details">
        <field name="name" display="Name" type="displaytext"/>
        <field name="description" display="Description" type="displaytext"/>
        <field name="typeName" display="Type" type="displaytext"/>
        <field name="itemLength" display="Number of Items" type="displaytext"/>
        <field name="enteredBy" display="Entered By" type="lookupUserId"/>
        <field name="enteredDateTimeString" display="Date" type="displaytext"/>
        <field name="modifiedBy" display="Last Modified By" type="lookupUserId"/>
        <field name="modifiedDateTimeString" display="Date" type="displaytext"/>
        <field name="id" display="id" type="hidden"/>
        <field name="modified" display="modified" type="hidden"/>
      </group>
      <group name="Survey Introduction Text">
        <field name="intro" display="" type="displaytext"/>
      </group>
      <group name="Survey Questions">
        <field name="questions" display="Question" type="displayRowlist"/>
      </group>
    </tab>
  </form>
  
  <!-- See a stand-alone Preview of the survey -->
  <form name="surveypreview" 
        returnLinkText="Communications Manager &gt; &lt;a href=&quot;CampaignManagerAttachment.do&quot;&gt;Create Attachments&lt;/a&gt; &gt; &lt;a href=&quot;CampaignManagerSurvey.do?command=View&quot;&gt;Surveys&lt;/a&gt; &gt; Survey Details &gt; Preview&lt;hr color=&quot;#BFBFBB&quot; noshade&gt;">
    <button text="Back to Details" link="CampaignManagerSurvey.do?command=Details&amp;auto-populate=true"/>
    <tab name="Page 1" id="0">
      <group name="Survey Preview">
        <field name="intro" type="displaytext"/>
        <field name="questions" type="displayrowlist" lengthVar="itemLength"/>
        <field name="id" display="id" type="hidden"/>
        <field name="modified" display="modified" type="hidden"/>
      </group>
    </tab>
  </form>
  
  <!-- Actual survey that is taken by user -->
  <form name="surveyview" 
        action="ProcessSurvey.do?command=Insert&amp;auto-populate=true">
    <tab name="Page 1" id="0">
      <group name="Survey Preview">
        <field name="intro" type="displaytext"/>
        <field name="questions" type="displayrowlist" lengthVar="itemLength"/>
      </group>
    </tab>
  </form>
</application>

